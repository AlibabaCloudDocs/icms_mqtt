# 实例管理 {#concept_52975_zh .concept}

本文介绍如何对微消息队列 MQTT 实例进行续费、变配及运维管理。

实例续费和变配只适用于包年包月（预付费）类型的实例，不适用于按量付费（后付费）的实例。

## 实例续费 {#section_y43_c5h_hhb .section}

微消息队列 MQTT 实例到期之前 7 天会按照账号给对应的手机发送通知，请及时续费。如果到期未续费，实例将被保留 7 天，之后自动释放。

1.  在微消息队列 MQTT 控制台顶部菜单栏，选择实例所在地域（Region）。
2.  在左侧导航栏，单击**实例管理**。

3.  在**实例管理**页面上方选择需要续费的实例。

4.  在默认显示的**实例信息**页签，单击**续费**。步骤示例如[图 1](#fig_wp1_3a4_yub)。

    ![](images/52197_zh-CN.png "实例续费")

5.  在**续费**页面，按需选择续费时长，并完成支付即可成功续费。

**（推荐）开通自动续费**

对于包年包月的实例，您可以在阿里云控制台设置自动续费，以免由于人为因素造成实例过期，影响服务。

1.  在控制台顶部菜单栏，选择**费用** \> **续费管理**。

    页面跳转至**续费管理**控制台。

2.  在左侧**产品**列表单击 **LMQ微消息队列**，找到需开通自动续费的实例，并在其**操作**列单击**开通自动续费**。

3.  在弹出的**开通自动续费**对话框，按需选择**自动续费周期**，再单击**开通自动续费**即可。

## 实例变配 {#section_why_xz4_azr .section}

服务运行期间，您可根据业务发展的情况来决定是否需要升级或降级现有的实例规格。在变更实例规格时，您需注意以下几点：

-   基础版实例升级配置一般实时生效；企业铂金版一般需要微消息队列 MQTT 技术人员介入，会需要一定时间，升级期间服务运行不会受到影响。

-   实例降配为实时生效，且不退款，所以建议在当前实例付费周期即将结束时再进行降配操作。

-   实例变配不能跨版本操作，即基础版无法变更为铂金版，铂金版也不能变更为基础版。


1.  在微消息队列 MQTT 控制台顶部菜单栏，选择实例所在地域。
2.  在左侧导航栏，单击**实例管理**。

3.  在**实例管理**页面上方选择需要变配的实例。

4.  在默认显示的**实例信息**页签，单击**升级**。页面跳转至**变配**页面，如[图 2](#fig_gj3_nvh_hhb)所示。

    ![](images/42290_zh-CN.png "实例变配")

5.  在**变配**页面，按需选择实例规格，并完成支付即可完成实例变配。

## 实例运维 {#section_zt2_kh1_ece .section}

实例运行期间，您可以查看实例的数据统计信息，包括消息收发 TPS、订阅关系数和客户端连接数，还可以设置实例报警，实时监控实例使用情况。

-   **查看实例的数据统计** 
    1.  在微消息队列 MQTT 控制台顶部菜单栏，选择需查看的实例所在地域。
    2.  在左侧导航栏，单击**实例管理**。

    3.  在**实例管理**页面上方选择需要查看的实例。

    4.  单击**数据统计**页签，设置时间范围，然后单击**查询**。

        ![](images/42292_zh-CN.png "实例运维数据统计")

-   **设置实例的监控报警** 

    微消息队列 MQTT 除了提供每个实例的消息收发 TPS、订阅关系数和客户端连接数信息的查看，还可以在监测到这些指标超过设置的报警阈值后，向联系人手机发送报警短信，提示尽快升级规格。

    报警阈值默认为规格的 70%，报警阈值和报警开关均可自定义。

    1.  在控制台左侧导航栏，单击**实例管理**。

    2.  在**实例管理**页面上方选择需要设置报警的实例。

    3.  在默认显示的**实例信息**页签，单击**监控**。

    4.  在**监控告警**对话框，输入报警阈值，并保持**报警开关**一栏**开启**，然后单击**确定**。

        ![](images/42291_zh-CN.png "监控报警")


## 切换计费模式 {#section_djy_tvw_21h .section}

如需切换实例的计费模式，您可按以下思路操作：

1.  创建新实例。
2.  消费者程序同时连接到新旧两个实例，确保可以同时处理来自新旧实例的消息。
3.  将生产者更新为新实例的配置。
4.  消费者不再连接到旧实例，在控制台的**实例管理**页面，单击**删除实例**来删除原实例即可。

如果业务上修改客户端程序存在疑问，请[提交工单](https://selfservice.console.aliyun.com/ticket/createIndex?spm)咨询。

